/* jquery.dropotron.js v1.4.3 | (c) @ajlkn | github.com/ajlkn/jquery.dropotron | MIT licensed */
!function($) {
  $.fn.disableSelection_dropotron = function() {
    return $(this).css({
      'user-select': 'none',
      '-khtml-user-select': 'none',
      '-moz-user-select': 'none',
      '-o-user-select': 'none',
      '-webkit-user-select': 'none'
    });
  };

  $.fn.dropotron = function(options) {
    if (this.length === 0) return this;
    if (this.length > 1) {
      for (let i = 0; i < this.length; i++) {
        $(this[i]).dropotron(options);
      }
      return this;
    }
    return $.dropotron($.extend({ selectorParent: $(this) }, options));
  };

  $.dropotron = function(options) {
    const settings = $.extend({
      selectorParent: null,
      baseZIndex: 1000,
      menuClass: "dropotron",
      expandMode: "none", // Set to "none" to disable hover and click
      hoverDelay: 150,
      hideDelay: 250,
      openerClass: "opener",
      openerActiveClass: "active",
      submenuClassPrefix: "level-",
      mode: "fade",
      speed: "fast",
      easing: "swing",
      alignment: "left",
      offsetX: 0,
      offsetY: 0,
      globalOffsetY: 0,
      IEOOffsetX: 0,
      IEOOffsetY: 0,
      noOpenerFade: true,
      detach: true,
      cloneOnDetach: true
    }, options);

    const $parent = settings.selectorParent;
    const $menus = $parent.find("ul");
    const $body = $("body");

    // Initialize dropdowns
    $menus.each(function() {
      const $menu = $(this);
      $menu.disableSelection_dropotron().show().addClass(settings.menuClass)
        .css({
          position: 'absolute',
          left: '0px',
          top: '0px',
          opacity: '1'
        });

      // Always make dropdowns visible
      $menu.show();
    });

    // If expandMode is set to none, no need for hover or click handlers
    if (settings.expandMode === 'none') {
      $parent.addClass(settings.openerClass).css('cursor', 'default');
      $parent.on('click touchend', function(e) {
        e.preventDefault();
        e.stopPropagation();
        // Optional: You can add functionality here if needed
      });
    } else {
      // Original hover and click handling code
      // (You may choose to keep or modify it according to your needs)
    }

    // Make dropdowns always visible
    $body.on("click touchend", function() {
      // No collapse action, dropdowns are always visible
    });

    // Ensure that the dropdowns are positioned correctly
    $menus.each(function() {
      const $menu = $(this);
      const offset = $menu.parent().offset();
      $menu.css({
        left: offset.left + settings.offsetX + 'px',
        top: offset.top + settings.offsetY + 'px'
      });
    });
  };
}(jQuery);
